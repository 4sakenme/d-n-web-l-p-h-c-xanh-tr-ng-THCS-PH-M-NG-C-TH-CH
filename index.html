<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªõp h·ªçc xanh</title>

    <button id="themeToggle" onclick="toggleDarkMode()">
        <img id="themeIcon" src="https://cdn-icons-png.flaticon.com/512/581/581601.png" alt="theme icon">
    </button>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to right, #e6f5ec, #ffffff);
            margin: 0;
            padding: 0;
            scroll-behavior: smooth;
            transition: background 0.3s ease;
        }

        header {
            background: linear-gradient(to right, #4caf50, #81c784);
            color: white;
            padding: 2rem;
            text-align: center;
            animation: fadeInDown 1s ease;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        nav {
            background: #388e3c;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .menu {
            display: none;
            flex-direction: column;
        }

        .menu.show {
            display: flex;
        }

        nav button {
            background: none;
            color: white;
            font-size: 1.2rem;
            padding: 1rem;
            width: 100%;
            border: none;
            cursor: pointer;
        }

        .menu a {
            color: white;
            text-decoration: none;
            padding: 1rem;
            border-top: 1px solid rgba(255,255,255,0.2);
        }

        .menu a:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        @media (min-width: 768px) {
            nav {
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 0.5rem;
            }
            nav button {
                display: none;
            }
            .menu {
                display: flex !important;
                flex-direction: row;
            }
            .menu a {
                margin: 0 1rem;
                padding: 0.75rem 1rem;
                border-top: none;
            }
        }

        main {
            padding: 2rem;
            animation: fadeIn 1.2s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        section {
            margin-bottom: 2rem;
            background: #ffffffee;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            animation: fadeInUp 1s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #2e7d32;
        }

        img.phanloai {
            max-width: 100%;
            display: block;
            margin: 1rem auto;
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }

        footer {
            background: #2e7d32;
            color: white;
            text-align: center;
            padding: 1rem;
        }

        input, textarea {
            width: 100%;
            padding: 0.6rem;
            margin: 0.5rem 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box; /* ƒê·∫£m b·∫£o padding kh√¥ng l√†m tr√†n khung */
        }

        input[type="submit"] {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }

        input[type="submit"]:hover {
            background-color: #388e3c;
        }

        .counter {
            font-weight: bold;
            color: #1b5e20;
            text-align: center;
            margin-top: 1rem;
        }


        /* DARK MODE STYLE */
        #themeToggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            z-index: 2000;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #themeToggle:hover {
            transform: scale(1.1);
        }

        #themeToggle img {
            width: 28px;
            height: 28px;
        }

        body.dark {
            background: linear-gradient(to right, #1e1e1e, #121212);
            color: #f1f1f1;
        }

        body.dark section {
            background: #2a2a2a;
            color: #f1f1f1;
        }

        body.dark h2 {
            color: #81c784;
        }

        body.dark header {
            background: linear-gradient(to right, #2e7d32, #1b5e20);
        }

        body.dark footer {
            background: #1b5e20;
        }

        body.dark #themeToggle {
            background: #333;
        }
        body.dark .chat-box {
  background: #1e1e1e;
}

body.dark .chat-box p {
  color: #ffffff;
}
        .chat-box {
  height: 300px;
  overflow-y: auto;
  border: 1px solid #ccc;
  padding: 10px;
  background: #f5f5f5;
  border-radius: 10px;
}

.chat-input {
  display: flex;
  margin-top: 10px;
}

.chat-input input {
  flex: 1;
  padding: 8px;
}

.chat-input button {
  padding: 8px 15px;
  cursor: pointer;
}.chat-box p {
  margin: 5px 0;
  color: #000;   /* √©p ch·ªØ ƒëen trong n·ªÅn s√°ng */
}
    </style>
</head>

<body>

    <header>
        <h1>üå± L·ªõp h·ªçc Xanh - S·ªëng Xanh m·ªói ng√†y</h1>
        <p>H√†nh ƒë·ªông nh·ªè - √ù nghƒ©a l·ªõn</p>
    </header>

    <nav>
        <button onclick="toggleMenu()">‚ò∞ Menu</button>
        <div class="menu" id="dropdownMenu">
            <a href="#phanloai">‚ôªÔ∏è Ph√¢n lo·∫°i r√°c</a>
            <a href="#nhua">üö´ Gi·∫£m nh·ª±a</a>
            <a href="#theodoi">üìä Theo d√µi</a>
            <a href="#khaosat">üìù Kh·∫£o s√°t</a>
            <a href="#gopy">üí° G√≥p √Ω</a>
        </div>
    </nav>

    <main>
        <section id="phanloai">
            <h2>Ph√¢n lo·∫°i r√°c h·ªçc ƒë∆∞·ªùng</h2>
            <p>H∆∞·ªõng d·∫´n c√°ch ph√¢n lo·∫°i r√°c: H·ªØu c∆°, v√¥ c∆°, t√°i ch·∫ø v√† nguy h·∫°i. H√£y c√πng nhau b·ªè r√°c ƒë√∫ng n∆°i quy ƒë·ªãnh nh√©!</p>
            <img class="phanloai" src="https://i.imgur.com/yJc6Vds.png" alt="S∆° ƒë·ªì ph√¢n lo·∫°i r√°c">
            <ul>
                <li><strong>R√°c h·ªØu c∆°:</strong> v·ªè tr√°i c√¢y, th·ª©c ƒÉn th·ª´a,...</li>
                <li><strong>R√°c t√°i ch·∫ø:</strong> chai nh·ª±a, gi·∫•y, lon,...</li>
                <li><strong>R√°c v√¥ c∆°:</strong> v·ªè snack, bao b√¨ composite</li>
                <li><strong>R√°c nguy h·∫°i:</strong> pin, b√≥ng ƒë√®n,...</li>
            </ul>
        </section>

        <section id="nhua">
            <h2>Gi·∫£m s·ª≠ d·ª•ng nh·ª±a d√πng m·ªôt l·∫ßn</h2>
            <p>H√£y s·ª≠ d·ª•ng b√¨nh n∆∞·ªõc c√° nh√¢n, ·ªëng h√∫t tre v√† h·ªôp c∆°m thay v√¨ ƒë·ªì nh·ª±a m·ªôt l·∫ßn!</p>
            <ul>
                <li>Kh√¥ng d√πng ly nh·ª±a t·∫°i cƒÉng-tin</li>
                <li>D√πng t√∫i v·∫£i thay cho t√∫i nylon</li>
                <li>T·ª± mang h·ªôp khi mua th·ª©c ƒÉn mang v·ªÅ</li>
            </ul>
        </section>

        <section id="theodoi">
            <h2>Theo d√µi ƒëi·ªán & n∆∞·ªõc l·ªõp h·ªçc</h2>
            <p>D·ªØ li·ªáu theo th·ªùi gian th·ª±c t·ª´ Google Sheets:</p>
            <iframe width="100%" height="400" frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRJ7nU.../pubchart?oid=1234567890&amp;format=interactive"></iframe>
        </section>

        <section id="khaosat">
            <h2>Kh·∫£o s√°t nhanh</h2>
            <p>H√¥m nay b·∫°n ƒë√£ mang b√¨nh n∆∞·ªõc c√° nh√¢n ch∆∞a?</p>
            <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSd.../viewform?embedded=true" width="100%" height="500" frameborder="0" marginheight="0" marginwidth="0">ƒêang t·∫£i‚Ä¶</iframe>
        </section>

        <section id="gopy">
            <h2>G√≥p √Ω s√°ng ki·∫øn xanh</h2>
            <p>B·∫°n c√≥ √Ω t∆∞·ªüng b·∫£o v·ªá m√¥i tr∆∞·ªùng n√†o mu·ªën chia s·∫ª? G·ª≠i ngay t·∫°i ƒë√¢y!</p>
            <form onsubmit="submitIdea(event)">
                <label for="name">T√™n b·∫°n:</label>
                <input type="text" id="name" name="name" required>

                <label for="idea">√ù t∆∞·ªüng:</label>
                <textarea id="idea" name="idea" rows="5" required></textarea>

                <input type="submit" value="G·ª≠i √Ω t∆∞·ªüng">
            </form>
            <p class="counter">S·ªë √Ω t∆∞·ªüng ƒë√£ g·ª≠i: <span id="ideaCount">0</span></p>

            <h3>üìã Danh s√°ch √Ω t∆∞·ªüng</h3>
            <table border="1" width="100%" style="border-collapse: collapse; text-align: left;">
                <thead>
                    <tr style="background-color: #f2f2f2; color: #333;">
                        <th style="padding: 8px;">Ng√†y</th>
                        <th style="padding: 8px;">T√™n</th>
                        <th style="padding: 8px;">√ù t∆∞·ªüng</th>
                    </tr>
                </thead>
                <tbody id="ideaTable"></tbody>
            </table>
        </section>

        <section>
            <h2>üìà S·ªë l∆∞·ª£t truy c·∫≠p</h2>
            <p class="counter">B·∫°n l√† l∆∞·ª£t truy c·∫≠p s·ªë: <span id="visitCounter">...</span></p>
        </section>
        <section id="ai">
  <h2>ü§ñ Tr·ª£ l√Ω L·ªõp H·ªçc Xanh</h2>

  <div id="chatBox" class="chat-box"></div>

  <div class="chat-input">
    <input type="text" id="userInput" placeholder="H·ªèi m√¨nh v·ªÅ m√¥i tr∆∞·ªùng..." />
    <button onclick="sendMessage()">G·ª≠i</button>
  </div>
</section>
</section>
    </main>

    <footer>
        &copy; 2025 L·ªõp h·ªçc Xanh | Thi·∫øt k·∫ø b·ªüi h·ªçc sinh tr∆∞·ªùng THCS Ph·∫°m Ng·ªçc Th·∫°ch "NVL"!
    </footer>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbzIeA-1MEkK3r-8hiiikg9NCoiSwg2r6sMMJUdjNagRLCS_3FLFJzWSQ-qaJnlZ05dZvQ/exec";

/* =========================
   MENU
========================= */
function toggleMenu() {
    document.getElementById("dropdownMenu").classList.toggle("show");
}

/* =========================
   G·ª¨I √ù T∆Ø·ªûNG (KH√îNG JSON)
========================= */
async function submitIdea(event) {
    event.preventDefault();

    const name = document.getElementById("name").value.trim();
    const idea = document.getElementById("idea").value.trim();

    if (!name || !idea) {
        alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß!");
        return;
    }

    try {
        await fetch(API_URL, {
            method: "POST",
            body: new URLSearchParams({
                type: "idea",
                name: name,
                idea: idea
            })
        });

        alert("G·ª≠i th√†nh c√¥ng!");
        document.getElementById("name").value = "";
        document.getElementById("idea").value = "";

        await loadStats();

    } catch (err) {
        console.error("L·ªói g·ª≠i √Ω t∆∞·ªüng:", err);
        alert("C√≥ l·ªói x·∫£y ra!");
    }
}

/* =========================
   ƒê·∫æM VISIT (KH√îNG JSON)
========================= */
async function countVisit() {
    try {
        await fetch(API_URL, {
            method: "POST",
            body: new URLSearchParams({
                type: "visit"
            })
        });
    } catch (err) {
        console.error("L·ªói ƒë·∫øm visit:", err);
    }
}

/* =========================
   LOAD S·ªê LI·ªÜU
========================= */
async function loadStats() {
    try {
        const res = await fetch(API_URL);
        const data = await res.json();

        document.getElementById("visitCounter").innerText = data.visits || 0;
        document.getElementById("ideaCount").innerText = data.ideas || 0;

    } catch (err) {
        console.error("L·ªói load stats:", err);
    }
}

/* =========================
   DARK MODE
========================= */
function toggleDarkMode() {
    const body = document.body;
    const icon = document.getElementById("themeIcon");
    body.classList.toggle("dark");

    if (body.classList.contains("dark")) {
        icon.src = "https://cdn-icons-png.flaticon.com/512/869/869869.png";
        localStorage.setItem("theme", "dark");
    } else {
        icon.src = "https://cdn-icons-png.flaticon.com/512/581/581601.png";
        localStorage.setItem("theme", "light");
    }
}

function loadTheme() {
    const savedTheme = localStorage.getItem("theme");
    const icon = document.getElementById("themeIcon");

    if (savedTheme === "dark") {
        document.body.classList.add("dark");
        icon.src = "https://cdn-icons-png.flaticon.com/512/869/869869.png";
    }
}

/* =========================
   LOAD WEB
========================= */
window.addEventListener("load", async () => {
    loadTheme();
    await countVisit();
    await loadStats();
});
</script>
</body>
</html>
